
:root{
  --panel:#ffffffd0;
  --ink:#2b291f;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:#f3efe8 url('../assets/fabric.svg');
  color:var(--ink);
  font-family:Quicksand,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
}

.hero{padding:24px 16px 8px; text-align:center}
.subtitle{margin:4px 0 0; color:#6a6454}

.stitched-title{
  font-family:Nunito,system-ui,sans-serif; font-weight:900; font-size:38px; margin:0;
  display:inline-block; letter-spacing:1px; color:#9b5d24; position:relative;
  text-shadow:
    0 1px 0 #d8b497, 0 -1px 0 #d8b497,
    1px 0 0 #d8b497, -1px 0 0 #d8b497;
}
.stitched-title::after{
  content:""; position:absolute; left:0; right:0; bottom:-6px; height:2px;
  background:repeating-linear-gradient(90deg,#c36a2b 0 6px,transparent 6px 12px);
  filter:drop-shadow(0 1px 0 #fff);
}

.wrap{
  display:grid; gap:16px; padding:12px; max-width:1200px; margin:0 auto;
  grid-template-columns:1fr;
}
@media (min-width:960px){ .wrap{grid-template-columns:420px 1fr;} }

.panel{
  background:var(--panel); border-radius:16px; padding:12px;
  box-shadow:0 10px 30px rgba(0,0,0,.04), inset 0 0 0 2px rgba(168,122,69,.15);
  backdrop-filter:saturate(120%) blur(2px);
}

.controls .grid{
  display:grid; grid-template-columns:1fr 1fr; gap:10px; margin:10px 0;
}
.controls .row{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
.hidden{display:none!important}

label{display:flex; flex-direction:column; gap:6px; font-size:14px}
input[type="number"], select, input[type="range"]{
  width:100%; padding:8px 10px; border-radius:10px; border:1px dashed #c6a47f;
  background:#fff; color:#2b291f;
}

.file{
  display:block; border:2px dashed #c6a47f; padding:14px; text-align:center; border-radius:12px;
  color:#6a6454; cursor:pointer; background:#fff;
}
.file input{display:none}

.toggles{display:flex; flex-direction:column; gap:6px; margin-top:6px}
.toggle{display:flex; gap:8px; align-items:center}

.btn{
  appearance:none; border:2px dashed #a2703d; background:#fff; color:#6b3f09;
  padding:10px 14px; border-radius:12px; cursor:pointer; font-weight:700;
  transition:transform .08s ease, box-shadow .08s ease;
}
.btn:hover{transform:translateY(-1px)}
.btn:disabled{opacity:.45; cursor:not-allowed}
.btn.primary{background:#ffc188; border-color:#b56d2a}

.actions{margin:10px 0 4px}

.tabs{display:flex; gap:8px; margin-bottom:8px}
.tab{
  border:none; background:#ffe8cf; color:#7a4b13; padding:8px 12px; border-radius:999px; cursor:pointer;
  box-shadow:inset 0 0 0 2px #e7b17a;
}
.tab.active{background:#ffc188}
.tab-body{display:none}
.tab-body.active{display:block}

.notes{margin-top:10px}
.notes summary{cursor:pointer}

.preview h2.stitched{
  margin:0 0 8px; font-family:Nunito,system-ui; font-weight:900; color:#6b3f09;
  text-shadow:0 1px 0 #f3e2d0, 0 -1px 0 #f3e2d0, 1px 0 0 #f3e2d0, -1px 0 0 #f3e2d0;
}
.hoop{
  background:#0e1423; border-radius:16px; padding:10px; position:relative; color:#9fb0d7;
}
.hoop::before{
  content:""; position:absolute; inset:10px; border-radius:20px;
  border:2px dashed rgba(147,173,231,.3); pointer-events:none;
}
.hint{margin:8px 2px 0; color:#8ea0c9}

#preview{width:100%; height:auto; display:block; background:#0c1221; border-radius:12px}

.log{
  margin-top:8px; background:#151a2b; color:#e7ebff; border-radius:10px; padding:8px; font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size:12px;
  max-height:180px; overflow:auto; white-space:pre-wrap
}
.log .ok{color:#78f0b6}
.log .warn{color:#ffd479}
.log .err{color:#ff98a9}

#drawCanvas{
  background:#fff; border-radius:12px; border:1px dashed #c6a47f;
  touch-action:none;
}

.foot{padding:20px; text-align:center; color:#7a7466}