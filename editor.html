<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Easbroidery — Editor</title>
  <link rel="preload" href="assets/logo.png" as="image">
  <!-- keep your global site styles -->
  <link rel="stylesheet" href="styles.css">
  <!-- new, editor-only styles to avoid changing other pages -->
  <link rel="stylesheet" href="editor.css">
</head>
<body class="editor-shell">
  <!-- Top Bar -->
  <header class="eb-topbar" role="banner">
    <div class="eb-topbar__left">
      <a href="index.html" class="eb-brand">
        <img src="assets/logo.png" alt="Easbroidery" class="eb-brand__logo">
        <span class="eb-brand__name">Easbroidery</span>
      </a>
    </div>
    <nav class="eb-menubar" aria-label="Editor menu">
      <button class="eb-menu__btn" data-action="file">File</button>
      <button class="eb-menu__btn" data-action="edit">Edit</button>
    </nav>
    <div class="eb-topbar__right">
      <button id="eb-save" class="eb-btn eb-btn--secondary">Save</button>
      <button id="eb-export" class="eb-btn eb-btn--primary">Export</button>
    </div>
  </header>

  <!-- Main Layout -->
  <main class="eb-layout" role="main">
    <!-- Left Rail -->
    <aside class="eb-rail" aria-label="Tools">
      <ul class="eb-tools" role="toolbar" aria-orientation="vertical">
        <li><button class="eb-tool" data-tool="select">Select</button></li>
        <li><button class="eb-tool" data-tool="brush">Brush</button></li>
        <li><button class="eb-tool" data-tool="eraser">Eraser</button></li>
        <li><button class="eb-tool" data-tool="wand">Wand</button></li>
        <li><button class="eb-tool" data-tool="lasso">Lasso</button></li>
        <li><button class="eb-tool" data-tool="text">Text</button></li>
        <li><button class="eb-tool" data-tool="shapes">Shapes</button></li>
        <li><button class="eb-tool" data-tool="uploads">Uploads</button></li>
        <li><button class="eb-tool" data-tool="layers">Layers</button></li>
      </ul>

      <!-- Loom preview mini -->
      <section class="eb-loom" aria-label="Loom preview">
        <h2 class="eb-loom__title">Loom preview</h2>
        <div class="eb-loom__card">
          <canvas id="loomPreviewCanvas" width="160" height="160" aria-label="Mini hoop live preview"></canvas>
        </div>
        <button id="loomPreviewEnlarge" class="eb-btn eb-btn--ghost">Enlarge</button>
      </section>

      <!-- Mobile FAB (preview hidden to a button) -->
      <button id="previewFab" class="eb-fab" aria-label="Open Loom preview">Preview</button>
    </aside>

    <!-- Stage -->
    <section class="eb-stage" aria-label="Editor canvas">
      <div class="eb-canvas-wrap">
        <div class="eb-ruler eb-ruler--top"></div>
        <div class="eb-ruler eb-ruler--left"></div>
        <canvas id="mainCanvas" width="1600" height="1200" aria-label="Edit canvas"></canvas>
      </div>
    </section>

    <!-- Right Context Panel -->
    <aside class="eb-context" aria-label="Tool settings">
      <h3>Contextual settings for active tool</h3>
      <div id="contextMount"></div>
    </aside>
  </main>

  <!-- Bottom Status Bar -->
  <footer class="eb-status" role="contentinfo">
    <div class="eb-status__group">
      <span id="statusZoom">Zoom 100%</span>
      <span id="statusHoop">4.0" × 4.0</span>
      <span id="statusStitches">0 stitches</span>
    </div>
    <button id="btnConvert" class="eb-btn eb-btn--primary">Convert</button>
  </footer>

  <!-- Enlarge Preview Modal -->
  <dialog id="previewModal" class="eb-modal" aria-label="Loom preview">
    <div class="eb-modal__head">
      <h4>Loom preview</h4>
      <button id="previewModalClose" class="eb-iconbtn" aria-label="Close">✕</button>
    </div>
    <div class="eb-modal__body">
      <canvas id="loomPreviewLarge" width="900" height="700" aria-label="Large hoop preview"></canvas>
    </div>
  </dialog>

  <!-- Existing runtime + scripts -->
  <script src="lib/ort.min.js"></script>
  <script src="app.js"></script>
  <script src="script.upload.js"></script>
  <script src="script.preview.js"></script>
  <script src="script.draw.js"></script>
  <script src="processing.js"></script>
  <script src="worker.js"></script>

  <!-- Editor-only glue. Does not touch other pages. -->
  <script src="editor.ui.js"></script>
</body>
</html>