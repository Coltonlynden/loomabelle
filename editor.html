<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Easbroidery — Editor</title>
  <link rel="icon" href="assets/logo.png">
  <link rel="stylesheet" href="styles.css"/>
  <script src="lib/ort.min.js"></script>
  <script defer src="app.js"></script>
  <script defer src="processing.js"></script>
  <script defer src="script.upload.js"></script>
  <script defer src="script.draw.js"></script>
  <script defer src="script.preview.js"></script>
</head>
<body class="shell">
<header class="site-header">
  <a class="brand" href="index.html">
    <img src="assets/logo.png" alt="Easbroidery logo"><span>EASBROIDERY</span>
  </a>
  <nav class="nav">
    <a href="index.html" data-nav="home">Home</a>
    <a href="features.html" data-nav="features">Features</a>
    <a href="pricing.html" data-nav="pricing">Pricing</a>
  </nav>
</header>

<main class="container editor">
  <!-- Collapsible general options -->
  <details class="card options" open>
    <summary>Hoop & machine options</summary>
    <div class="row">
      <label>Machine/Hoop
        <select id="hoopSelect">
          <option value="100x100">Brother 4&quot; x 4&quot; (100×100&nbsp;mm)</option>
          <option value="130x180" selected>Brother 5&quot; x 7&quot; (130×180&nbsp;mm)</option>
          <option value="160x260">Brother 6&quot; x 10&quot; (160×260&nbsp;mm)</option>
          <option value="200x300">Generic 8&quot; x 12&quot; (200×300&nbsp;mm)</option>
        </select>
      </label>
      <label>Stitch spacing (mm)
        <input type="number" id="spacing" value="1.6" min="0.6" step="0.1">
      </label>
      <label>Angle
        <input type="number" id="angle" value="45" step="1">
      </label>
      <label>
        <input type="checkbox" id="showDir" checked> Show direction overlay
      </label>
      <button class="btn" id="autoBtn">Auto highlight</button>
    </div>
  </details>

  <!-- 1. Upload & View -->
  <section class="card">
    <h2>1. Upload & edit</h2>

    <div class="toolbar">
      <input type="file" id="file" accept="image/*">
      <div class="zoom">
        <button class="chip" id="zoomOut">−</button>
        <span class="chip" id="zoomPct">100%</span>
        <button class="chip" id="zoomIn">+</button>
        <span class="muted">Tip: hold <kbd>Alt</kbd> and drag to pan when zoomed.</span>
      </div>
    </div>

    <div id="editWrap">
      <!-- Canvas the user paints on; toolbar is ATTACHED just beneath -->
      <canvas id="edit" width="1024" height="768"></canvas>

      <div class="brush">
        <div class="seg">
          <button class="chip toggle active" data-tool="paint">Paint</button>
          <button class="chip toggle" data-tool="erase">Erase</button>
          <button class="chip toggle" data-tool="wand">Wand</button>
          <button class="chip" id="undo">Undo</button>
          <button class="chip" id="redo">Redo</button>
          <button class="chip" id="clear">Clear</button>
          <label class="grow">Size
            <input type="range" id="size" min="6" max="64" value="24">
          </label>
          <label><input type="checkbox" id="showMask" checked> Show mask</label>
          <label><input type="checkbox" id="showEdges"> Show edges</label>
          <label><input type="checkbox" id="lockScroll" checked> Lock scroll while drawing</label>
        </div>

        <div class="seg texttools">
          <button class="chip toggle" data-tool="text">Text</button>
          <input class="input" id="text" placeholder="Add text">
          <button class="chip" id="applyText">Apply</button>
          <label>Curve <input type="range" id="curve" min="0" max="80" value="20"></label>
          <label>Size <input type="range" id="textSize" min="10" max="160" value="64"></label>
          <label>Angle <input type="range" id="textAngle" min="-90" max="90" value="0"></label>
        </div>

        <div class="seg dirtools">
          <button class="chip toggle" data-tool="direction">Direction</button>
          <label>Angle <input type="range" id="dirAngle" min="0" max="180" value="45"></label>
        </div>
      </div>
    </div>
  </section>

  <!-- 2. Live preview (separate) -->
  <section class="card">
    <h2>2. Live preview</h2>
    <div id="hoop" class="hoop">
      <canvas id="preview" width="900" height="700"></canvas>
      <div class="hoop-hardware"></div>
    </div>

    <div class="exportbar">
      <label><input type="checkbox" id="showStitch" checked> Show stitch preview</label>
      <button class="btn btn-primary" id="gen">Generate stitches</button>
      <button class="chip" id="savePng">PNG</button>
      <button class="chip" id="saveSvg">SVG</button>
      <button class="chip" id="saveJson">Stitches JSON</button>
      <button class="chip" id="saveDst">DST</button>
    </div>
  </section>
</main>

<footer class="site-footer">© Easbroidery</footer>
</body>
</html>