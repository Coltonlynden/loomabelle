:root{
  --bg:#fae8de;
  --card:#f6d9c9;
  --ink:#5e4744;
  --muted:#7d6260;
  --accent:#d97970;
  --chip:#f3c3b3;
  --ring:#f9efe9;
  --good:#2d8f65;
  --bad:#b63b3b;
}
*{box-sizing:border-box}
html,body{margin:0;height:100%;background:var(--bg);color:var(--ink);font:16px/1.4 "Inter",-apple-system,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
h1,h2,h3{margin:.25rem 0 .5rem}
h1{font-size:clamp(1.8rem,2.2rem + 1vw,3.2rem);line-height:1.05}
h2{font-size:1.25rem}
p,small,label{color:var(--muted)}
img{max-width:100%;display:block}
.wrap{max-width:1100px;margin:0 auto;padding:16px}
.site{display:flex;flex-direction:column;min-height:100%}
.foot{opacity:.7;padding:32px 16px}

/* nav */
.nav{position:sticky;top:0;z-index:40;background:var(--bg);border-bottom:1px solid #e9cabd;padding:8px 16px;display:flex;gap:16px;align-items:center}
.brand{display:flex;gap:10px;align-items:center;text-decoration:none;color:var(--ink);font-weight:700}
.brand img{width:40px;height:40px;object-fit:contain;border-radius:8px}
.links{margin-left:auto;display:flex;gap:20px}
.links a{color:var(--muted);text-decoration:none;padding:8px 2px;border-bottom:2px solid transparent}
.links a.active,.links a:hover{color:var(--ink);border-bottom-color:var(--accent)}

/* hero */
.hero-card{position:relative;background:var(--card);border-radius:18px;padding:20px 20px 28px;box-shadow:0 3px 0 #e8c6b7 inset,0 14px 40px rgba(0,0,0,.06)}
.lede{margin:.25rem 0 1rem}
.hero-photo{margin:.75rem 0 1.1rem;border-radius:14px;overflow:hidden;box-shadow:0 1px 0 #e8c6b7 inset}
.hero-photo figcaption{font-size:.9rem;opacity:.7;margin-top:.35rem}
.inset{position:absolute;right:20px;top:58px;width:min(28vw,160px);height:auto;aspect-ratio:1;border-radius:50%;box-shadow:0 10px 28px rgba(0,0,0,.15)}
.inset img{border-radius:50%;border:10px solid white;box-shadow:0 6px 20px rgba(0,0,0,.15)}
.cta-row{margin-top:.5rem}
.btn{border:none;border-radius:12px;padding:.7rem 1rem;background:#ead1c5;color:var(--ink);cursor:pointer}
.btn.primary{background:var(--accent);color:#fff;font-weight:700}
.btn.ghost{background:#f4e2d8}
.file input{appearance:none}
.file input::-webkit-file-upload-button{visibility:hidden}
.file input::file-selector-button{display:none}

/* cards */
.card{background:var(--ring);border-radius:16px;padding:16px;margin:14px 0;box-shadow:0 1px 0 #edd9cf inset}
.row{display:flex;flex-wrap:wrap;gap:12px;align-items:center}
.chip-row{display:flex;flex-wrap:wrap;gap:8px;margin:.4rem 0}
.chip{background:var(--chip);border:none;border-radius:22px;padding:.5rem .8rem;cursor:pointer}
.toolbar{display:flex;flex-wrap:wrap;gap:10px;align-items:center}
.toolbar.compact .tip{opacity:.6}

/* editor layout */
.editor{display:grid;grid-template-columns:1fr 1fr;gap:18px}
@media (max-width:980px){.editor{grid-template-columns:1fr}}
.canvas-wrap{background:#fff;border-radius:12px;padding:8px;box-shadow:0 0 0 1px #eee inset;touch-action:none}
#editCanvas{width:100%;height:auto;display:block;border-radius:8px;background:#f7f7f7}
.tools{margin-top:8px}
.seg{background:var(--ring);border-radius:12px;padding:10px}
.seg-tabs{display:flex;gap:8px;margin-bottom:8px}
.seg-btn{border:none;border-radius:12px;padding:.4rem .7rem;background:#edd9cf;cursor:pointer}
.seg-btn.active{background:var(--accent);color:#fff}
.hidden{display:none}

/* hoop preview (machine hoop) */
.hoop{position:relative;display:grid;place-items:center;padding:22px;background:#ead8cd;border-radius:22px;box-shadow:inset 0 0 0 2px #d8c2b7,inset 0 0 0 10px #f5e6de}
.hoop:before{content:"";position:absolute;inset:28px;border-radius:20px;box-shadow:inset 0 0 0 10px #bdb0a9,inset 0 0 0 18px #fff}
.hoop-hardware{position:absolute;right:30px;top:50%;translate:0 -50%;width:32px;height:120px;border-radius:10px;background:#b9a79d;box-shadow:inset 0 0 0 6px #9f8f87}
#previewCanvas{width:100%;max-width:900px;height:auto;border-radius:14px;background:#fff;box-shadow:0 2px 0 #eee}
.palette{margin-top:10px}
.swatches{display:flex;flex-wrap:wrap;gap:8px}
.swatches button{width:28px;height:28px;border-radius:50%;border:2px solid #fff;box-shadow:0 0 0 1px rgba(0,0,0,.2);cursor:pointer}
.swatches button.off{opacity:.35;outline:2px dashed #999}

/* sticky action bar */
.actionbar{position:sticky;bottom:0;left:0;right:0;z-index:50;background:rgba(250,232,222,.95);backdrop-filter:saturate(1.1) blur(2px);border-top:1px solid #e6cfc2;display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:center;padding:10px}

/* minor */
.zoom{display:flex;gap:6px;align-items:center}
.zoom span{min-width:56px;text-align:center}
.opts summary{cursor:pointer;font-weight:700}
.bullets{line-height:1.7}